<!DOCTYPE html> <html lang="fa"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>📷 اسکنر بارکد حرفه‌ای</title> <style> body {font-family:Tahoma, sans-serif; text-align:center;} video {width:100%;max-width:400px;border:2px solid #444;border-radius:12px;} #result {margin-top:10px;font-size:18px;font-weight:bold;color:#007bff;} button, select { padding:10px 15px;margin:5px; border:none;border-radius:8px; background:#28a745;color:white;font-size:16px; } select {background:#007bff;} </style> </head> <body> <h2>📦 اسکنر بارکد حرفه‌ای</h2> <video id="video" autoplay></video> <div id="result">⏳ در حال اسکن...</div> <br> <button id="switch">🔄 تغییر دوربین</button> <select id="quality"> <option value="low">Low (640x480)</option> <option value="hd" selected>HD (1280x720)</option> <option value="fullhd">FullHD (1920x1080)</option> </select> <script src="https://unpkg.com/@zxing/library@latest"></script> <script> const video=document.getElementById('video'); const result=document.getElementById('result'); const switchBtn=document.getElementById('switch'); const qualitySel=document.getElementById('quality'); let currentFacingMode="environment"; // دوربین پشت let currentQuality={width:{ideal:1280},height:{ideal:720}}; // پیش‌فرض HD let stream=null; function getQualitySetting(level){ if(level==="low") return {width:{ideal:640},height:{ideal:480}}; if(level==="fullhd") return {width:{ideal:1920},height:{ideal:1080}}; return {width:{ideal:1280},height:{ideal:720}}; } async function startCamera(){ if(stream){stream.getTracks().forEach(t=>t.stop());} try{ stream=await navigator.mediaDevices.getUserMedia({ video:{facingMode:currentFacingMode,...currentQuality} }); video.srcObject=stream; scanBarcode(); }catch(e){ result.textContent="❌ دسترسی به دوربین نشد: "+e; } } async function scanBarcode(){ if('BarcodeDetector' in window){ const detector=new BarcodeDetector({ formats:['code_128','ean_13','ean_8','upc_a','upc_e','code_39','itf','qr_code'] }); setInterval(async ()=>{ try{ const codes=await detector.detect(video); if(codes.length>0){ result.textContent="✅ بارکد: "+codes[0].rawValue; } }catch(e){} },200); }else{ const codeReader=new ZXing.BrowserMultiFormatReader(); codeReader.decodeFromVideoDevice(null,'video',(res,err)=>{ if(res){result.textContent="✅ بارکد: "+res.text;} }); } } switchBtn.onclick=()=>{ currentFacingMode=currentFacingMode==="environment"?"user":"environment"; startCamera(); }; qualitySel.onchange=()=>{ currentQuality=getQualitySetting(qualitySel.value); startCamera(); }; startCamera(); </script> </body> </html> 
